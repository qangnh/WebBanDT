@{
    ViewBag.Title = "ThanhToan";
    Layout = "~/Views/Shared/_CartLogin.cshtml";
}
<br />
<br />

<div class="checkout-container">
    <div class="checkout-steps">
        <div class="cart-header">
            <a href="@Url.Action("ThongTin", "Cart")">
                <i class="fa-solid fa-chevron-left"></i> Quay lại
            </a>
            <p>Thanh toán</p>
        </div>
    </div>

    <div class="checkout-box">
        <!-- Các phần như voucher, summary, payment method giữ nguyên -->

        <div class="customer-info">
            <h3>THÔNG TIN NHẬN HÀNG</h3>
            <div class="info-row"><strong>Khách hàng:</strong> <span id="show-fullname"></span></div>
            <div class="info-row"><strong>Số điện thoại:</strong> <span id="show-phone"></span></div>
            <div class="info-row"><strong>Giới tính:</strong> <span id="show-gender"></span></div>
            <div class="info-row"><strong>Email:</strong> <span id="show-email"></span></div>
            <div class="info-row"><strong>Nhận hàng tại:</strong> <span id="show-address"></span></div>
            <div class="info-row"><strong>Ghi chú:</strong> <span id="show-note"></span></div>
        </div>

        <div class="confirm-box">
            <label><input type="checkbox" checked /> Tôi đồng ý với <a href="#">Điều khoản sử dụng</a></label>
            <div class="checkout-total">
                <span>Tổng tiền tạm tính:</span>
                <span class="total-amount">31.990.000đ</span>
            </div>
            <button class="btn-confirm">Thanh toán</button>
        </div>
    </div>
</div>

<!-- Popup thông báo -->
<div id="success-popup" class="popup">
    <div class="popup-content">
        <h2>🎉 Thanh toán thành công!</h2>
        <p>Cảm ơn bạn đã mua hàng tại <b>Good Phones</b> 💖</p>
        <button id="close-popup">Đóng</button>
    </div>
</div>

<script>
    // Hiển thị popup
    const btnPay = document.querySelector(".btn-confirm");
    const popup = document.getElementById("success-popup");
    const closePopup = document.getElementById("close-popup");

    btnPay.addEventListener("click", () => {
        popup.style.display = "flex";
    });

    closePopup.addEventListener("click", () => {
        popup.style.display = "none";
    });

    // Lấy dữ liệu từ sessionStorage
    $(document).ready(function () {
        const fullName = sessionStorage.getItem("FullName") || "";
        const phone = sessionStorage.getItem("Phone") || "";
        const gender = sessionStorage.getItem("Gender") || "";
        const email = sessionStorage.getItem("Email") || "";
        const province = sessionStorage.getItem("Province") || "";
        const district = sessionStorage.getItem("District") || "";
        const ward = sessionStorage.getItem("Ward") || "";
        const note = sessionStorage.getItem("Note") || "";

        $("#show-fullname").text(fullName);
        $("#show-phone").text(phone);
        $("#show-gender").text(gender);
        $("#show-email").text(email); // nếu bạn muốn gửi email từ form cũ
        $("#show-address").text(`${ward}, ${district}, ${province}`);
        $("#show-note").text(note);
    });
</script>
