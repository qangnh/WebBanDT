@{
    ViewBag.Title = "SanPham";
    Layout = "~/Views/Shared/_LayoutPro.cshtml";
}
<div class="product-page">
    <div class="container">

        <!-- breadcrumb -->
        <nav style="font-size:13px;color:#888;margin-bottom:8px">
            <span>Điện thoại & Phụ kiện</span> / <span>Điện thoại</span> / <span>Apple</span> /
            <strong>iPhone 16 Pro Max </strong>
        </nav>

        <!-- ===== HÀNG 1: 3 CỘT ===== -->
        <div class="top-3col">
            <!-- GALLERY -->
            <section class="gal">
                <img id="mainImg" class="gal-main" src="https://cellphones.com.vn/media/catalog/product/i/p/iphone-16-pro-max_1.png" alt="">
                <div class="gal-thumbs" id="thumbs">
                    <button class="gal-thumb is-active"><img data-src="https://cellphones.com.vn/media/catalog/product/i/p/iphone-16-pro-max_1.png" src="https://cellphones.com.vn/media/catalog/product/i/p/iphone-16-pro-max_1.png"></button>
                    <button class="gal-thumb"><img data-src="https://cellphones.com.vn/media/catalog/product/i/p/iphone-16-pro-max-2_1.png" src="https://cellphones.com.vn/media/catalog/product/i/p/iphone-16-pro-max-2_1.png"></button>
                    <button class="gal-thumb"><img data-src="https://cellphones.com.vn/media/catalog/product/i/p/iphone-16-pro-max-3_1.png" src="https://cellphones.com.vn/media/catalog/product/i/p/iphone-16-pro-max-3_1.png"></button>
                    <button class="gal-thumb"><img data-src="https://cellphones.com.vn/media/catalog/product/i/p/iphone-16-pro-max-5_1.png" src="https://cellphones.com.vn/media/catalog/product/i/p/iphone-16-pro-max-5_1.png"></button>
                </div>
            </section>

            <!-- INFO (giữa) -->
            <section>
                <h1 class="title">Điện thoại Apple iPhone 16 Pro Max  | Chính hãng VN/A</h1>
                <div class="meta">
                    <div><strong>5.0</strong> <i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i></div>
                    <div class="dot"></div><a style="color:#666;text-decoration:none" href="#">15,1K đánh giá</a>
                    <div class="dot"></div><span>Đã bán 60k+</span>
                </div>

                <div class="price-card">
                    <div style="display:flex;align-items:center">
                        <div class="price-now">31.490.000<sup>đ</sup></div>
                        <div class="price-old">36.990.000<sup>đ</sup></div>
                        <div class="price-off">-9%</div>
                    </div>
                    <div class="ship"><i class="fa-solid fa-truck-fast"></i><span>Nhận từ <strong>14 Th10 - 17 Th10</strong> • <u>Miễn phí vận chuyển</u></span></div>
                </div>

                <div class="pickers">
                    <div class="label">Dung lượng</div>
                    <div class="inline">
                        <button class="pill active capacity" data-price="33790000">256GB</button>
                        <button class="pill capacity" data-price="37990000">512GB</button>
                        <button class="pill capacity" data-price="46990000">1TB</button>
                    </div>
                </div>

                <div class="pickers">
                    <div class="label">Màu sắc</div>
                    <div class="inline">
                        <button class="pill active variant" data-color="Titan - Đen"><img src="https://cdn2.cellphones.com.vn/insecure/rs:fill:50:50/q:90/plain/https://cellphones.com.vn/media/catalog/product/i/p/iphone-16-pro-max-titan-den_1.png">Titan - Đen</button>
                        <button class="pill variant" data-color="Titan - Tự nhiên"><img src="https://cdn2.cellphones.com.vn/insecure/rs:fill:50:50/q:90/plain/https://cellphones.com.vn/media/catalog/product/i/p/iphone-16-pro-max-titan-tu-nhien_1.png">Titan - Tự nhiên</button>
                        <button class="pill variant" data-color="Titan - Sa mạc"><img src="https://cdn2.cellphones.com.vn/insecure/rs:fill:50:50/q:90/plain/https://cellphones.com.vn/media/catalog/product/i/p/iphone-16-pro-max-titan-sa-mac_1.png">Titan - Sa mạc</button>
                        <button class="pill variant" data-color="Titan - Trắng"><img src="https://cdn2.cellphones.com.vn/insecure/rs:fill:50:50/q:90/plain/https://cellphones.com.vn/media/catalog/product/i/p/iphone-16-pro-max-titan-trang_1.png">Titan - Trắng</button>
                    </div>
                </div>

                <div class="pickers" style="grid-template-columns:120px auto">
                    <div class="label">Số lượng</div>
                    <div class="qty">
                        <button class="btn-qty" type="button" onclick="chgQty(-1)">−</button>
                        <input id="qty" value="1">
                        <button class="btn-qty" type="button" onclick="chgQty(1)">+</button>
                    </div>
                </div>

                <div class="cta">
                    <button class="btn-outline"><i class="fa-solid fa-cart-shopping" style="margin-right:6px"></i>Thêm Vào Giỏ Hàng</button>
                    <button class="btn-buy">Mua Ngay</button>
                    <button class="btn-outline">Trả góp 0%</button>
                </div>

                <div class="note"><i class="fa-regular fa-circle-check"></i><span>Xử lý đơn hàng bởi Multi-UseSmart • Trả hàng miễn phí 15 ngày • Chính hãng VN/A</span></div>
            </section>

            <!-- SIDEBAR STICKY (phải) -->
            <aside class="sticky">
                <div class="card">
                    <h3>Thông tin vận chuyển</h3>
                    <div class="line"><i class="fa-solid fa-location-dot"></i><span>Chọn chi nhánh nhận hàng</span></div>
                    <div class="line"><i class="fa-solid fa-truck-fast"></i><span>Nhận từ <strong>14 Th10 - 17 Th10</strong> • <u>Miễn phí vận chuyển</u></span></div>
                </div>

                <div class="card promo">
                    <strong>Khuyến mãi hấp dẫn</strong>
                    <ul style="margin-top:8px">
                        <li>Giảm 5% tối đa 200.000đ khi thanh toán qua Kredivo</li>
                        <li>Tặng Sim/Esim VNSKY, 5GB/ngày, miễn phí 30 ngày đầu</li>
                        <li>Ưu đãi Smember (tuỳ sản phẩm)</li>
                    </ul>
                    <div style="display:flex;gap:10px;margin-top:10px">
                        <button class="btn-buy" style="flex:1">Mua ngay</button>
                        <button class="btn-outline" style="flex:1">Thêm vào giỏ</button>
                    </div>
                </div>
            </aside>
        </div>

        <!-- ===== HÀNG 2: Trái 2 cột – Phải sticky (giống ảnh) ===== -->
        <div class="mid-2col">
            <div>
                <div class="card">
                    <h3>Cam kết sản phẩm</h3>
                    <div class="line"><i class="fa-solid fa-mobile-screen-button"></i> Máy mới 100% – Chính hãng Apple VN/A</div>
                    <div class="line"><i class="fa-solid fa-box-open"></i> Hộp, Cáp USB-C (1m), Tài liệu</div>
                    <div class="line"><i class="fa-solid fa-shield-halved"></i> Bảo hành 12 tháng • 1 đổi 1 trong 30 ngày nếu lỗi NSX</div>
                    <div class="line"><i class="fa-solid fa-square-check"></i> Giá đã bao gồm VAT</div>
                </div>

                <div class="card" style="margin-top:12px">
                    <h3>Thông số kỹ thuật</h3>
                    <div class="line"><b>Kích thước màn hình:</b>&nbsp;6.7” Super Retina XDR OLED 120Hz</div>
                    <div class="line"><b>Camera sau:</b>&nbsp;48MP + 12MP (UW) + 12MP Tele 5x</div>
                    <div class="line"><b>Camera trước:</b>&nbsp;12MP f/1.9</div>
                    <div class="line"><b>Chip:</b>&nbsp;A17 Pro</div>
                    <div class="line"><b>Bộ nhớ:</b>&nbsp;256GB / 512GB / 1TB</div>
                    <div class="line"><b>SIM:</b>&nbsp;2 SIM (nano-SIM & eSIM)</div>
                    <div class="line"><b>HĐH:</b>&nbsp;iOS 17/18</div>
                    <div class="line"><b>Cổng sạc:</b>&nbsp;USB-C</div>
                </div>
            </div>

            <!-- cột phải vẫn là sidebar -->
            <aside class="sticky">
                <div class="card">
                    <h3>Chọn nơi nhận</h3>
                    <div class="line"><i class="fa-solid fa-store"></i> Hệ thống cửa hàng gần bạn</div>
                    <div class="line"><i class="fa-solid fa-circle-info"></i> Hỗ trợ đổi trả trong 15 ngày</div>
                </div>
                <div class="card promo">
                    <strong>Ưu đãi thêm</strong>
                    <ul style="margin-top:8px">
                        <li>Mở thẻ VPBank giảm tới 500.000đ</li>
                        <li>Trả góp 0% qua thẻ tín dụng/CTTC</li>
                    </ul>
                </div>
            </aside>
        </div>

        <!-- ===== Có thể bạn thích ===== -->
        <section class="card reco">
            <h3>Có thể bạn cũng thích</h3>
            <div class="tabs">
                <a href="#">Tham khảo hàng cũ</a>
                <a href="#" style="opacity:.5;border-bottom-color:transparent">Sản phẩm tương tự</a>
            </div>
            <div class="reco-grid">
                @for (int i = 0; i < 5; i++)
                {
                    <div class="reco-card">
                        <img class="reco-img" src="https://cdn2.cellphones.com.vn/x358,webp,q100/media/catalog/product/i/p/iphone-16-pro-max_1.png" />
                        <div class="reco-title">iPhone 16 Pro Max 512GB – Cũ Đẹp</div>
                        <div class="reco-price">33.190.000đ</div>
                        <div class="reco-save">Tiết kiệm: 7.800.000đ</div>
                        <div style="font-size:12px;color:#888;margin-top:4px"><i class="fa-regular fa-heart"></i> Yêu thích</div>
                    </div>
                }
            </div>
        </section>

        <!-- ===== Đánh giá ===== -->
        <section class="card rating">
            <h3>Đánh giá iPhone 16 Pro Max 512GB | Chính hãng VN/A</h3>
            <div class="rating-head">
                <div class="rating-score">
                    <div class="num">4.9/5</div>
                    <div style="color:#f5a623;margin:4px 0">
                        <i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i>
                    </div>
                    <div style="color:#888">36 lượt đánh giá</div>
                    <button class="btn-outline" style="margin-top:6px">Viết đánh giá</button>
                </div>
                <div>
                    <div style="display:grid;grid-template-columns:30px 1fr 40px;gap:8px;align-items:center;margin-bottom:6px">
                        <span>5★</span><div class="bar bar-5"><span style="width:90%"></span></div><span>33</span>
                        <span>4★</span><div class="bar bar-4"><span style="width:8%"></span></div><span>3</span>
                        <span>3★</span><div class="bar bar-3"><span style="width:2%"></span></div><span>0</span>
                        <span>2★</span><div class="bar bar-2"><span style="width:0%"></span></div><span>0</span>
                        <span>1★</span><div class="bar bar-1"><span style="width:0%"></span></div><span>0</span>
                    </div>
                    <div style="margin-top:10px">
                        <strong>Đánh giá theo trải nghiệm</strong><br />
                        <span class="tag">Hiệu năng 5/5</span>
                        <span class="tag">Thời lượng pin 5/5</span>
                        <span class="tag">Camera 5/5</span>
                    </div>
                </div>
            </div>

            <div style="margin:14px 0">
                <strong>Lọc đánh giá theo:</strong>
                <span class="tag">Tất cả</span><span class="tag">Có hình ảnh</span><span class="tag">Đã mua hàng</span>
                <span class="tag">5 sao</span><span class="tag">4 sao</span><span class="tag">3 sao</span>
            </div>

            <div class="review">
                <div class="reviewer"><div class="avatar">V</div> Vinh Trần <span class="rev-meta">• 2 tuần trước</span></div>
                <div style="margin-top:6px">Hiệu năng siêu mạnh mẽ • Pin cực khủng • Camera đẹp</div>
            </div>
            <div class="review">
                <div class="reviewer"><div class="avatar">T</div> Trúc <span class="rev-meta">• 3 tháng trước</span></div>
                <div style="margin-top:6px">Sản phẩm tốt, nhân viên nhiệt tình </div>
            </div>

            <div style="text-align:center;margin-top:10px"><button class="btn-outline">Xem tất cả đánh giá</button></div>
        </section>

    </div>
</div>

<script>
    /* đổi ảnh chính */
    document.querySelectorAll('#thumbs img').forEach(img => {
        img.addEventListener('click', () => {
            document.getElementById('mainImg').src = img.dataset.src || img.src;
            document.querySelectorAll('.gal-thumb').forEach(b => b.classList.remove('is-active'));
            img.closest('.gal-thumb').classList.add('is-active');
        });
    });
    /* active + cập nhật giá theo dung lượng */
    function setActive(listSel, el) { document.querySelectorAll(listSel).forEach(x => x.classList.remove('active')); el.classList.add('active'); }
    document.querySelectorAll('.variant').forEach(b => b.addEventListener('click', () => setActive('.variant', b)));
    document.querySelectorAll('.capacity').forEach(b => {
        b.addEventListener('click', () => {
            setActive('.capacity', b);
            const p = +b.dataset.price || 0;
            document.querySelector('.price-now').innerHTML = p.toLocaleString('vi-VN') + '<sup>đ</sup>';
        });
    });
    /* số lượng */
    function chgQty(d) { const ip = document.getElementById('qty'); let v = parseInt(ip.value || '1', 10); v = isNaN(v) ? 1 : v + d; ip.value = v < 1 ? 1 : v; }
</script>

